OASISFormat: 0.4
Name:        session
Version:     0.1.0
Synopsis:    A session manager for your everyday needs
Authors:     Spiros Eliopoulos <spiros@inhabitedtype.com>
Maintainers: Spiros Eliopoulos <spiros@inhabitedtype.com>
Homepage:    https://github.com/inhabitedtype/ocaml-session
Copyrights:  (C) 2015 Inhabited Type LLC
License:     BSD-3-clause
Plugins:     META (0.4), DevFiles (0.4)
BuildTools:  ocamlbuild

Flag async
  Description: build the Async libraries
  Default: false

Flag postgresql
  Description: build the postgresql library
  Default: false

Library session
  Path:             lib
  Findlibname:      session
  Pack:             true
  BuildDepends:     result
  Modules:          Lift, Memory, S

Library session_postgresql
  Path:             backends/postgresql
  Findlibname:      postgresql
  Findlibparent:    session
  Build$:           flag(postgresql)
  Install$:         flag(postgresql)
  BuildDepends:     postgresql, result, session, threads
  Modules:          Session_postgresql

Library session_postgresql_async
  Path:             backends/postgresql
  Findlibname:      postgresql-async
  Findlibparent:    session
  Build$:           flag(postgresql) && flag(async)
  Install$:         flag(postgresql) && flag(async)
  BuildDepends:     async, postgresql, result, session, threads
  Modules:          Session_postgresql_async

Library session_postgresql_lwt
  Path:             backends/postgresql
  Findlibname:      postgresql-lwt
  Findlibparent:    session
  Build$:           flag(postgresql) && flag(lwt)
  Install$:         flag(postgresql) && flag(lwt)
  BuildDepends:     lwt, postgresql, result, session, threads
  Modules:          Session_postgresql_lwt

Executable test_memory_backend
  Path:             lib_test
  MainIs:           test_memory_backend.ml
  Build$:           flag(tests)
  CompiledObject:   best
  Install:          false
  BuildDepends:     session, result, oUnit (>= 1.0.2)

Test test_memory_backend
  Run$:             flag(tests)
  Command:          $test_memory_backend
  WorkingDirectory: lib_test

SourceRepository master
  Type:     git
  Location: https://github.com/inhabitedtype/ocaml-session.git
  Browser:  https://github.com/inhabitedtype/ocaml-session
